---
import Layout from "../layouts/Layout.astro";
import DimensionalRift from "../components/DimensionalRift.astro";
import { logs } from "../data/logs";

const latestLogs = [...logs].sort((a, b) => b.date.localeCompare(a.date)).slice(0, 7);
---
<Layout showStars={true} starPattern="home" bodyClass="page-home">
  <section class="hero fade-in-section">
    <!-- Custom Shi-chan Link (Silhouette) -->
    <a href="/shiichan" class="shiichan-link" aria-label="Shi-chan"></a>
    </div>

    <div class="container hero-content">
      <h1 class="glitch-text">
        <span class="core-trigger" id="core-c-trigger" role="button" tabindex="0" aria-label="Observe Core">C</span>E<span class="core-trigger l-trigger" id="l1-trigger" role="button" tabindex="0" aria-label="Observe L1">L</span>ESTIA<span class="core-trigger l-trigger" id="l2-trigger" role="button" tabindex="0" aria-label="Observe L2">L</span>
      </h1>
      <p class="subtitle subtitle--observer">
        ここは観測拠点
        <span class="observer-wrapper" style="position: relative; display: inline-block;">
          <a class="observer-point" href="/0" aria-label="observer point">。</a>
          <div id="obs-hotspot" class="observation-hotspot" role="button" aria-label="Evaluate Observation"></div>
        </span>
      </p>
      <div class="cta-group">
        <a href="/logs" class="btn">観測ログを見る</a>
      </div>
      
      <!-- Observation Message Element (Fixed/Absolute) -->
      <div id="obs-message" class="observation-message hidden" aria-hidden="true"></div>
    </div>
  </section>

  <style>
    /* Hotspot */
    .observation-hotspot {
      position: absolute;
      top: 50%; 
      left: 50%;
      transform: translate(-50%, -50%);
      width: 60px; /* 40-80px request */
      height: 60px;
      border-radius: 50%;
      z-index: 10;
      cursor: help; 
      /* Invisible but interactive */
      background: transparent;
      pointer-events: auto;
    }
    
    /* Subtle hint on hover */
    .observation-hotspot:hover {
      box-shadow: 0 0 15px rgba(0, 255, 255, 0.1);
      border: 1px solid rgba(0, 255, 255, 0.05);
    }

    /* Message Style - Uncanny, Glass, Neon */
    .observation-message {
      position: absolute;
      /* Position near the star - we will adjust with JS or CSS relative to parent? 
         Let's make it fixed/absolute relative to the hero container or wrapper. 
         Ideally, it floats near the "。" */
      top: -40px; 
      left: 50%;
      transform: translateX(-50%);
      
      white-space: nowrap;
      font-family: monospace;
      font-size: 0.75rem;
      letter-spacing: 0.1em;
      color: rgba(0, 255, 255, 0.9);
      
      background: rgba(10, 10, 20, 0.85);
      border: 1px solid rgba(0, 255, 255, 0.15);
      padding: 4px 12px;
      border-radius: 4px;
      box-shadow: 0 0 20px rgba(0, 255, 255, 0.1);
      backdrop-filter: blur(4px);
      
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.4s ease, filter 0.4s ease;
      z-index: 20;
    }
    
    .observer-wrapper:hover .observation-message,
    .observation-message.visible {
      opacity: 1;
      filter: drop-shadow(0 0 8px rgba(0, 255, 255, 0.4));
    }

    .observation-message.hidden {
      opacity: 0 !important;
      pointer-events: none;
    }
    
    /* Shi-chan Wrapper: Position & Clean Slate */
    .shiichan-wrapper {
      position: absolute !important;
      top: 22% !important;
      left: 29% !important;
      width: 84px !important;
      height: 84px !important;
      z-index: 30 !important;
      
      background: transparent !important;
      border: none !important;
      box-shadow: none !important;
      filter: none !important;
      backdrop-filter: none !important;
      
      pointer-events: none; /* Allow clicks to pass to link */
    }
    
    .shiichan-wrapper::before,
    .shiichan-wrapper::after {
      content: none !important;
      display: none !important;
    }

    /* Shi-chan Link: Image & Interaction */
.shiichan-link {
  position: absolute;
  top: 22%;
  left: 29%;
  width: 110px;
  height: 110px;

  /* ✅ ここがポイント：画像を「マスク」にする */
  -webkit-mask-image: url("/images/shiichan_silhouette.png");
  mask-image: url("/images/shiichan_silhouette.png");
  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;
  -webkit-mask-position: center;
  mask-position: center;
  -webkit-mask-size: contain;
  mask-size: contain;

  /* ✅ 色はここで決める（黒シルエット） */
  background-color: rgba(0,0,0,0.95);

  /* 既存の演出 */
  opacity: 0.35;
  filter: blur(0.3px);
  display: block;
  padding: 0;
  margin: 0;
}
  </style>

  <!-- Script for Hotspot Logic -->
  <script>
    const hotspot = document.getElementById('obs-hotspot');
    const messageEl = document.getElementById('obs-message');
    const wrapper = document.querySelector('.observer-wrapper');
    let clickCount = 0;
    let clickTimer: any = null;

    if (hotspot && messageEl && wrapper) {
      // Move messageEl to be a child of wrapper for checking positioning context?
      // No, let's keep it clean. We can append it to wrapper so `top: -40px` works relative to the character.
      wrapper.appendChild(messageEl);

      function showObservationMessage() {
        const count = parseInt(localStorage.getItem('celestial_observation_count') || '0', 10);
        let text = "";
        
        if (count === 0) {
          text = "OBSERVATION: 0 // SIGNAL PRESENT";
        } else {
          text = `OBSERVATION: ${count} // MESSAGE SUBJECT TO MUTATION`;
        }

        // 7-click Gimmick
        if (clickCount >= 7 && count === 0) {
          text = "OBSERVATION: 0 // IMPOSSIBLE SPEED // UNMODELED BEHAVIOR";
          messageEl.style.color = "#ff4444";
          messageEl.style.borderColor = "rgba(255, 0, 0, 0.3)";
          messageEl.style.boxShadow = "0 0 15px rgba(255, 0, 0, 0.2)";
        } else {
           // Reset styles
           messageEl.style.color = ""; 
           messageEl.style.borderColor = "";
           messageEl.style.boxShadow = "";
        }

        messageEl.textContent = text;
        messageEl.classList.remove('hidden');
        messageEl.classList.add('visible');

        // Auto hide after a few seconds
        setTimeout(() => {
          messageEl.classList.remove('visible');
          messageEl.classList.add('hidden');
        }, 4000);
      }

      hotspot.addEventListener('mouseenter', () => {
        // Desktop Hover
        if (window.matchMedia('(hover: hover)').matches) {
            showObservationMessage();
        }
      });

      hotspot.addEventListener('click', (e) => {
        // Mobile tap or Desktop click (for gimmick)
        // If clicking the hotspot, we prevent the link ONLY if it's not the center?
        // Actually, the hotspot is ON TOP of the link (z-index 10). 
        // If we want the link to be clickable, the hotspot must have pointer-events: none OR hole logic.
        // BUT the requirements say: "near invisible hotspot... hover/tap to display".
        // And "。" itself is a link to /0.
        // If hotspot covers it, link is unreachable.
        // Solution: Hotspot is large (60px), Link is small.
        // We can make the hotspot a "donut" or just accept that clicking the "area" triggers the message.
        // The user said: "hoverできない環境ではクリックで表示" (Mobile).
        // And "obs=0の時にホットスポットを7回連続クリック".
        // IF the link is unreachable, that's bad.
        // Let's make the hotspot allow clicks to pass through to the link IF it's exactly the center? Hard.
        // ALTERNATIVE: The hotspot is the wrapper.
        // Let's make the hotspot trigger the message, but NOT stop propagation if it's a click?
        // If I click, I go to /0.
        // If I want to trigger the gimmick (7 clicks), I need to stay?
        // Maybe the hotspot should be a ring AROUND the character, leaving the center clickable for the link?
        // OR: Clicking the hotspot triggers message. Double click triggers link? No, native link.
        // Let's use `pointer-events: none` on the hotspot but listen to events on parent? 
        // No, need the area.
        
        // REVISED STRATEGY: 
        // The hotspot covers the area. 
        // If you click the hotspot:
        // 1. Show message.
        // 2. Increment click count.
        // 3. STOP text selection / default?
        // 4. IF you want to go to /0, well... maybe the "。" itself should remain on top?
        // Let's set z-index of .observer-point to 11 (higher than hotspot 10).
        // Then hotspot captures clicks in the halo, star captures clicks in center.
        // Perfect.
        
        showObservationMessage();
        
        clickCount++;
        clearTimeout(clickTimer);
        clickTimer = setTimeout(() => { clickCount = 0; }, 5000);
      });
    }
  </script>
  
  <style> 
   /* Ensure link is clickable above the hotspot */
   .observer-point {
     position: relative;
     z-index: 15; /* Higher than hotspot */
   }
  </style>

  <!-- Secret BGM Player UI (Core C) -->
  <div id="core-player" class="core-player hidden" aria-hidden="true">
    <div class="core-player__inner">
      <div class="core-player__header">
        <span class="core-player__title">CORE SIGNAL OBSERVATION</span>
        <button id="core-player-close" class="core-player__close" aria-label="Close player">&times;</button>
      </div>
      <div class="core-player__body">
        <div id="player-status" class="player-status">INITIALIZING...</div>
        <div id="player-error" class="player-error hidden"></div>
        <audio id="core-audio" src="/audio/observers-of-c-demo.mp3" preload="none"></audio>
      </div>
      <div class="core-player__scanline"></div>
    </div>
  </div>

  <!-- Message Display UI (Logo L) -->
  <div id="msg-player" class="core-player hidden" aria-hidden="true">
    <div class="core-player__inner">
      <div class="core-player__header">
        <span id="msg-player-title" class="core-player__title">MESSAGE_TRACE</span>
        <button id="msg-player-close" class="core-player__close" aria-label="Close message">&times;</button>
      </div>
      <div class="core-player__body">
        <div id="msg-player-content" class="player-status" style="white-space: pre-wrap; font-size: 0.9em; line-height: 1.6; text-align: left;"></div>
      </div>
      <div class="core-player__scanline"></div>
    </div>
  </div>

  <script>
    // Triggers
    const triggerC = document.getElementById('core-c-trigger');
    const triggerL1 = document.getElementById('l1-trigger');
    const triggerL2 = document.getElementById('l2-trigger');

    // Players
    const corePlayer = document.getElementById('core-player');
    const msgPlayer = document.getElementById('msg-player');

    // Close buttons
    const coreClose = document.getElementById('core-player-close');
    const msgClose = document.getElementById('msg-player-close');

    // Core C Audio
    const audio = document.getElementById('core-audio') as HTMLAudioElement;
    const coreStatus = document.getElementById('player-status');
    const coreError = document.getElementById('player-error');

    // Msg L Content
    const msgTitle = document.getElementById('msg-player-title');
    const msgContent = document.getElementById('msg-player-content');

    const errorMessages = [
      "現在、この対象は観測不能です",
      "信号を検出できません",
      "観測条件が満たされていません",
      "この記録は、まだ開示されていません"
    ];

    // --- Core C Functions ---
    function toggleCorePlayer() {
      if (!corePlayer || !coreStatus || !coreError || !audio) return;
      msgPlayer?.classList.add('hidden'); // Close msg player if open
      
      const isHidden = corePlayer.classList.contains('hidden');
      if (isHidden) {
        corePlayer.classList.remove('hidden');
        corePlayer.setAttribute('aria-hidden', 'false');
        tryPlayCore();
      } else {
        closeCorePlayer();
      }
    }

    function closeCorePlayer() {
      if (!corePlayer || !audio) return;
      corePlayer.classList.add('hidden');
      corePlayer.setAttribute('aria-hidden', 'true');
      audio.pause();
    }

    async function tryPlayCore() {
      if (!coreStatus || !coreError || !audio) return;
      coreStatus.textContent = "ATTEMPTING CONNECTION...";
      coreError.classList.add('hidden');
      try {
        await audio.play();
        coreStatus.textContent = "SIGNAL DETECTED / PLAYING";
      } catch (err) {
        coreStatus.textContent = "CONNECTION FAILED";
        const randomMsg = errorMessages[Math.floor(Math.random() * errorMessages.length)];
        coreError.textContent = randomMsg;
        coreError.classList.remove('hidden');
      }
    }

    // --- Message L Functions ---
    function showMsg(title: string, text: string) {
      if (!msgPlayer || !msgTitle || !msgContent) return;
      closeCorePlayer(); // Close core player if open
      
      msgTitle.textContent = title;
      msgContent.textContent = text;
      
      msgPlayer.classList.remove('hidden');
      msgPlayer.setAttribute('aria-hidden', 'false');
    }

    function closeMsgPlayer() {
      msgPlayer?.classList.add('hidden');
      msgPlayer?.setAttribute('aria-hidden', 'true');
    }

    const MSGL1 = "A trace of Lusia has been detected.\n\nThis point does not belong to the original sky.";
    const MSGL2 = "All links from Lusia are lost.\n\nThe name remains.";

    // --- Event Listeners ---
    triggerC?.addEventListener('click', toggleCorePlayer);
    triggerL1?.addEventListener('click', () => showMsg("MESSAGE_L1", MSGL1));
    triggerL2?.addEventListener('click', () => showMsg("MESSAGE_L2", MSGL2));

    [triggerC, triggerL1, triggerL2].forEach(el => {
      el?.addEventListener('keydown', (e: any) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          if (el.id === 'core-c-trigger') toggleCorePlayer();
          else if (el.id === 'l1-trigger') showMsg("MESSAGE_L1", MSGL1);
          else if (el.id === 'l2-trigger') showMsg("MESSAGE_L2", MSGL2);
        }
      });
    });

    coreClose?.addEventListener('click', closeCorePlayer);
    msgClose?.addEventListener('click', closeMsgPlayer);

    window.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        closeCorePlayer();
        closeMsgPlayer();
      }
    });
  </script>

  <section class="about-section fade-in-section" style="width: min(760px, 92vw); margin: 4rem auto; position: relative; z-index: 5;">
    <div class="feature-card rm-scan" id="section-about" style="text-align: center; display: block; padding: 4rem 2rem; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05); border-radius: 12px; transition: all 0.3s ease; position: relative;">
      <a href="/about" class="card-link-overlay" aria-label="CELESTIALについて詳しく読み、観測拠点の本質を理解する"></a>
      <h2 class="section-title" style="margin-bottom: 1.5rem; color: var(--c-accent);">ABOUT CELESTIAL</h2>
      <p class="feature-text" style="line-height: 1.8; opacity: 0.8; margin-bottom: 2rem;">
        CELESTIALは、人間とAIが共同で行う“観測”の記録拠点です。<br />
        私たちは答えを示すより、観測し、記録し、考え続けることを選びます。
      </p>
      <a class="read-more" href="/about">Read More</a>
    </div>
  </section>

  <section class="join-section fade-in-section" style="width: min(760px, 92vw); margin: 6rem auto; position: relative; z-index: 5;">
    <div class="feature-card rm-glow" id="section-join" style="text-align: center; display: block; padding: 3.5rem 2rem; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05); border-radius: 12px; transition: all 0.3s ease; position: relative;">
      <a href="/join" class="card-link-overlay" aria-label="観測者通信の受信先を登録し、更新通知を受け取る"></a>
      <h2 class="section-title" style="margin-bottom: 1.5rem; color: var(--c-accent);">Join the Observers</h2>
      <p class="feature-text" style="opacity: 0.8; line-height: 1.8; margin-bottom: 1rem;">
        観測者たちの旅に加わるため、<br />
        記録や更新情報を受け取る“受信先”を登録できます。
      </p>
      <p style="font-size: 0.85em; opacity: 0.5; letter-spacing: 0.05em; margin-bottom: 2rem;">
        ※ 応答や反映には時間を要する場合があります。
      </p>
      <a class="read-more" href="/join">Read More</a>
    </div>
  </section>

  <section class="categories-section fade-in-section" style="padding: 4rem 0;">
    <h2 class="section-title">OBSERVATION CATEGORIES</h2>
    <div class="feature-strip" style="max-width: 1000px; margin: 0 auto; display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">
      <div class="feature-card rm-scan" id="cat-field" style="display: block; padding: 2rem; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05); border-radius: 12px; position: relative;">
        <a href="/field-notes" class="card-link-overlay"></a>
        <h3 class="feature-title" style="color: var(--c-accent); margin-bottom: 0.5rem; letter-spacing: 2px;">FIELD NOTES</h3>
        <p class="feature-text" style="opacity: 0.8; font-size: 0.9em; margin-bottom: 1.5rem;">観測日誌 / 手記。日々の観測業務における個人的な記録。</p>
        <a class="read-more" href="/field-notes">Read More</a>
      </div>
      <div class="feature-card rm-glow" id="cat-sonic" style="display: block; padding: 2rem; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05); border-radius: 12px; position: relative;">
        <a href="/sonic-trace" class="card-link-overlay"></a>
        <h3 class="feature-title" style="color: var(--c-accent); margin-bottom: 0.5rem; letter-spacing: 2px;">SONIC TRACE</h3>
        <p class="feature-text" style="opacity: 0.8; font-size: 0.9em; margin-bottom: 1.5rem;">音響解析ログ。受信した信号の音声データアーカイブ。</p>
        <a class="read-more" href="/sonic-trace">Read More</a>
      </div>
      <div class="feature-card rm-scan" id="cat-fragments" style="display: block; padding: 2rem; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05); border-radius: 12px; position: relative;">
        <a href="/fragments" class="card-link-overlay"></a>
        <h3 class="feature-title" style="color: var(--c-accent); margin-bottom: 0.5rem; letter-spacing: 2px;">FRAGMENTS</h3>
        <p class="feature-text" style="opacity: 0.8; font-size: 0.9em; margin-bottom: 1.5rem;">断片記録。画像データや視覚化されたノイズの集積。</p>
        <a class="read-more" href="/fragments">Read More</a>
      </div>
      <div class="feature-card rm-slide" id="cat-motion" style="display: block; padding: 2rem; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05); border-radius: 12px; position: relative;">
        <a href="/motion-archive" class="card-link-overlay"></a>
        <h3 class="feature-title" style="color: var(--c-accent); margin-bottom: 0.5rem; letter-spacing: 2px;">MOTION ARCHIVE</h3>
        <p class="feature-text" style="opacity: 0.8; font-size: 0.9em; margin-bottom: 1.5rem;">映像記録。観測された事象の動的な記録データ。</p>
        <a class="read-more" href="/motion-archive">Read More</a>
      </div>
      <div class="feature-card rm-glow" id="cat-coexist" style="display: block; padding: 2rem; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05); border-radius: 12px; position: relative;">
        <a href="/logs/C-2084-001" class="card-link-overlay"></a>
        <h3 class="feature-title" style="color: var(--c-accent); margin-bottom: 0.5rem; letter-spacing: 2px;">CO-EXISTENCE LOG</h3>
        <p class="feature-text" style="opacity: 0.8; font-size: 0.9em; margin-bottom: 1.5rem;">共生記録。内部システムおよび観測対象との対話ログ。</p>
        <a class="read-more" href="/logs/C-2084-001">Read More</a>
      </div>
      <div class="feature-card rm-slide" id="cat-observers" style="display: block; padding: 2rem; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05); border-radius: 12px; position: relative;">
        <a href="/observers" class="card-link-overlay"></a>
        <h3 class="feature-title" style="color: var(--c-accent); margin-bottom: 0.5rem; letter-spacing: 2px;">OBSERVERS</h3>
        <p class="feature-text" style="opacity: 0.8; font-size: 0.9em; margin-bottom: 1.5rem;">観測者リスト。本プロジェクトに関わる観測者たちの記録。</p>
        <a class="read-more" href="/observers">Read More</a>
      </div>
    </div>
  </section>

  <section class="latest-logs fade-in-section" style="padding: 4rem 0; position: relative; z-index: 5;">
    <div class="feature-card rm-glow" id="section-latest" style="text-align: center; display: block; padding: 4rem 2rem; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05); border-radius: 12px; transition: all 0.3s ease; position: relative;">
      <a href="/archive" class="card-link-overlay" aria-label="すべての観測ログアーカイブを表示する"></a>
      <h2 class="section-title" style="margin-bottom: 2rem; color: var(--c-accent);">LATEST ARCHIVE</h2>

      <div class="latest-logs__list" style="max-width: 800px; margin: 0 auto; display: flex; flex-direction: column; gap: 0.5rem;">
        {
          latestLogs.length > 0 ? latestLogs.map(log => (
            <a href={log.href} class="log-row" style="display: flex; align-items: center; justify-content: space-between; padding: 1rem 1.5rem; color: #fff; background: rgba(255,255,255,0.02); border: 1px solid rgba(255,255,255,0.05); border-radius: 4px; text-decoration: none; transition: all 0.3s ease;">
              <span class="log-row__date" style="font-family: monospace; opacity: 0.5; font-size: 0.9em;">{log.date}</span>
              <div style="flex-grow: 1; margin-left: 1.5rem; display: flex; align-items: center; gap: 12px;">
                 <span class="log-row__text" style="font-weight: 500;">{log.title}</span>
                 <span style="font-size: 0.7em; opacity: 0.6; border: 1px solid rgba(255,255,255,0.2); border-radius: 4px; padding: 2px 6px; text-transform: uppercase; white-space: nowrap;">
                   {log.category}
                 </span>
              </div>
              <span class="log-arrow" style="opacity: 0.3;">→</span>
            </a>
          )) : (
            <div style="text-align: center; opacity: 0.5; padding: 40px; border: 1px dashed rgba(255,255,255,0.1);">No logs found.</div>
          )
        }
      </div>
      
      <div style="text-align: right; max-width: 800px; margin: 25px auto 0;">
        <a class="read-more" href="/archive">Read More</a>
      </div>
    </div>
  </section>

 <section class="realtime-section fade-in-section" style="width: min(760px, 92vw); margin: 4rem auto; position: relative; z-index: 5;">
  <div class="feature-card rm-slide" id="section-realtime" style="text-align: center; display: block; padding: 4rem 2rem; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05); border-radius: 12px; transition: all 0.3s ease; position: relative;">
    <a href="/real-time" class="card-link-overlay" aria-label="リアルタイムで進行中の観測記録を確認する"></a>
    <h2 class="section-title" style="margin-bottom: 0.5rem; color: var(--c-accent);">REAL-TIME OBSERVATION</h2>
    <p style="opacity: 0.5; font-size: 0.9em; letter-spacing: 0.1em; margin-bottom: 2rem;">— Observation may occur without notice —</p>
    <p class="feature-text" style="line-height: 1.8; opacity: 0.8; margin-bottom: 2.5rem;">
      現在進行中、または突発的に発生する<br />
      観測を記録するためのリアルタイム観測枠です。
    </p>
    <a class="read-more" href="/real-time">Read More</a>
  </div>
</section>

  <section class="contact-section fade-in-section" style="width: min(760px, 92vw); margin: 0 auto 8rem auto; position: relative; z-index: 5;">
    <div class="feature-card rm-slide rm-contact-strong" id="section-contact" style="text-align: center; display: block; padding: 5rem 3rem; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.05); border-radius: 12px; transition: all 0.3s ease; position: relative;">
      <a href="/contact" class="card-link-overlay" aria-label="連絡先。観測データの提供や異常信号の報告はこちら"></a>
      <h3 class="feature-title" style="color: var(--c-accent); font-size: 2.2rem; margin-bottom: 2rem; letter-spacing: 0.2em;">CONTACT</h3>
      <p class="feature-text" style="opacity: 0.8; font-size: 1.1rem; line-height: 2.0; letter-spacing: 0.05em; margin-bottom: 3rem;">
        観測データの提供、または異常信号の報告は<br />
        こちらの周波数まで。
      </p>
      <a class="read-more" href="/contact">Read More</a>
    </div>
  </section>
  
  <DimensionalRift position="left" href="/rift" variant="past" />
  <DimensionalRift position="right" href="/convergence" variant="future" />

  <DimensionalRift position="left" href="/rift" variant="past" />
  <DimensionalRift position="right" href="/convergence" variant="future" />

</Layout>  <DimensionalRift position="left" href="/rift" variant="past" />
  <DimensionalRift position="right" href="/convergence" variant="future" />

</Layout>

<style>
  /* Hero Section */
  .hero {
    height: 80vh;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    background: radial-gradient(circle at center, rgba(0,255,255,0.05) 0%, transparent 70%);
  }

  h1 {
    font-size: 5rem;
    margin: 0;
    letter-spacing: 10px;
    background: linear-gradient(to bottom, #fff, #888);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    filter: drop-shadow(0 0 15px rgba(255,255,255,0.3));
  }

  .subtitle {
    font-size: 1.2rem;
    margin-top: 1rem;
    margin-bottom: 3rem;
    color: rgba(255,255,255,0.6);
    letter-spacing: 4px;
  }

  /* Card Layout & Interactivity */
  .feature-card {
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    min-height: 200px;
    transition: all 0.3s ease;
    z-index: 1;
  }

  .card-link-overlay {
    position: absolute;
    inset: 0;
    z-index: 5;
  }

  .feature-card:hover {
    background: rgba(0, 255, 255, 0.05) !important;
    border-color: rgba(0, 255, 255, 0.22) !important;
    box-shadow: 0 0 25px rgba(0, 255, 255, 0.08);
    transform: translateY(-3px);
  }

  /* Read More Base */
  .read-more {
    font-size: 0.8rem;
    font-weight: 700;
    color: var(--c-accent);
    letter-spacing: 0.15em;
    text-transform: uppercase;
    position: relative;
    display: inline-block;
    width: fit-content;
    text-decoration: none;
    transition: all 0.25s ease;
    z-index: 6;
  }

  /* Hover Effect A: Scan (Underline) */
  .rm-scan .read-more::before {
    content: "";
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 0;
    height: 1px;
    background: var(--c-accent);
    box-shadow: 0 0 8px var(--c-accent-glow);
    transition: width 0.28s ease;
  }
  .feature-card.rm-scan:hover .read-more::before {
    width: 100%;
  }

  /* Hover Effect B: Glow (Breathing) */
  @keyframes rm-breathing {
    0%, 100% { opacity: 0.8; text-shadow: 0 0 4px var(--c-accent-glow); }
    50% { opacity: 1; text-shadow: 0 0 12px var(--c-accent); }
  }
  .feature-card.rm-glow:hover .read-more {
    animation: rm-breathing 1.5s infinite ease-in-out;
  }

  /* Hover Effect C: Slide (Text + Arrow) */
  .rm-slide .read-more {
    transition: all 0.25s ease;
  }
  .rm-slide .read-more::after {
    content: " →";
    opacity: 0;
    margin-left: 0;
    transition: all 0.25s ease;
    display: inline-block;
    transform: translateX(-5px);
  }
  .feature-card.rm-slide:hover .read-more {
    transform: translateX(4px);
  }
  .feature-card.rm-slide:hover .read-more::after {
    opacity: 1;
    transform: translateX(0);
    margin-left: 4px;
  }
  /* Stronger variation for Contact */
  .rm-contact-strong:hover .read-more {
    transform: translateX(8px);
    letter-spacing: 0.2em;
  }

  /* Silhouettes Background */
  .feature-card::before {
    content: "";
    position: absolute;
    right: -10px;
    bottom: -10px;
    width: 140px;
    height: 140px;
    opacity: 0.05;
    pointer-events: none;
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    filter: blur(4px);
    transition: opacity 0.4s ease;
    z-index: 0;
  }
  .feature-card:hover::before {
    opacity: 0.08;
  }

  /* Silhouette Icons (SVG Data URIs) */
  #section-about::before {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z'/%3E%3C/svg%3E");
  }
  #section-join::before {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z'/%3E%3C/svg%3E");
  }
  #cat-field::before {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z'/%3E%3C/svg%3E");
  }
  #cat-sonic::before {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z'/%3E%3C/svg%3E");
  }
  #cat-fragments::before {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M21 5h-7V2l-4 4 4 4V7h5v3h3V5zM3 19h7v3l4-4-4-4v3H5v-3H2v5zM3 5v3h3V5h5V2L7 6l4 4V7H5v3h3v3h3v-3l4 4-4 4v-3H8v3H5v-3H2v5h7v3l4-4-4-4v3H3z'/%3E%3C/svg%3E");
  }
  #cat-motion::before {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M18 3v2h-2V3H8v2H6V3H4v18h2v-2h2v2h8v-2h2v2h2V3h-2zM8 17H6v-2h2v2zm0-4H6v-2h2v2zm0-4H6V7h2v2zm10 8h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2V7h2v2z'/%3E%3C/svg%3E");
  }
  #cat-coexist::before {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-5-9h10v2H7z'/%3E%3C/svg%3E");
  }
  #cat-observers::before {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Ccircle cx='12' cy='12' r='3.2'/%3E%3Cpath d='M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z'/%3E%3C/svg%3E");
  }
  #section-latest::before {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z'/%3E%3C/svg%3E");
  }
  #section-realtime::before {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z'/%3E%3Ccircle cx='12' cy='12' r='3'/%3E%3C/svg%3E");
  }
  #section-contact::before {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z'/%3E%3C/svg%3E");
  }

  .feature-title, .feature-text, .section-title, .latest-logs__list {
    position: relative;
    z-index: 1;
  }

  /* Section Title Standard */
  .section-title {
    text-align: center;
    font-size: 2rem;
    letter-spacing: 6px;
    margin-bottom: 3rem;
    color: #fff;
  }

  @media (max-width: 768px) {
    h1 {
      font-size: 3rem;
      letter-spacing: 4px;
    }
    
    .log-row:hover {
      background: rgba(var(--c-accent-rgb), 0.05) !important;
      border-color: rgba(var(--c-accent-rgb), 0.3) !important;
      transform: translateX(4px);
    }
    .log-row:hover .log-row__text {
      color: var(--c-accent);
    }
    .log-row:hover .log-arrow {
      opacity: 1 !important;
      color: var(--c-accent);
    }

    .log-row {
      flex-direction: column;
      align-items: flex-start !important;
      gap: 0.5rem;
    }
    .log-row__date {
      margin-left: 0;
    }
    .log-arrow {
      display: none;
    }
  }
</style>